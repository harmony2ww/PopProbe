<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 900" font-family="Arial, sans-serif">
  <defs>
    <linearGradient id="blueGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1d4ed8;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="greenGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#22c55e;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#16a34a;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="orangeGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f97316;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#ea580c;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="purpleGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#8b5cf6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#7c3aed;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="redGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#ef4444;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#dc2626;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="4" stdDeviation="4" flood-opacity="0.15"/>
    </filter>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#64748b"/>
    </marker>
  </defs>
  
  <rect width="1200" height="900" fill="#f8fafc"/>
  
  <text x="600" y="50" text-anchor="middle" font-size="28" font-weight="bold" fill="#0f172a">Cohort-Component Population Projection Model</text>
  <text x="600" y="80" text-anchor="middle" font-size="16" fill="#64748b">Population Prediction Simulator - Algorithm Overview</text>
  
  <rect x="50" y="110" width="320" height="200" rx="12" fill="white" stroke="#e2e8f0" stroke-width="2" filter="url(#shadow)"/>
  <rect x="50" y="110" width="320" height="40" rx="12" fill="url(#blueGrad)"/>
  <text x="210" y="137" text-anchor="middle" font-size="16" font-weight="bold" fill="white">INPUT DATA</text>
  
  <text x="70" y="175" font-size="14" fill="#374151">* Base year population (by age group)</text>
  <text x="70" y="200" font-size="14" fill="#374151">* Total Fertility Rate (TFR) curve</text>
  <text x="70" y="225" font-size="14" fill="#374151">* Life expectancy curve</text>
  <text x="70" y="250" font-size="14" fill="#374151">* Mean childbearing age curve</text>
  <text x="70" y="275" font-size="14" fill="#374151">* Sex ratio at birth</text>
  
  <rect x="430" y="110" width="340" height="200" rx="12" fill="white" stroke="#e2e8f0" stroke-width="2" filter="url(#shadow)"/>
  <rect x="430" y="110" width="340" height="40" rx="12" fill="url(#purpleGrad)"/>
  <text x="600" y="137" text-anchor="middle" font-size="16" font-weight="bold" fill="white">DATA PREPROCESSING</text>
  
  <text x="450" y="175" font-size="14" fill="#374151">1. 5-year groups to single ages</text>
  <text x="450" y="200" font-size="14" fill="#374151">2. Unit standardization (to thousands)</text>
  <text x="450" y="225" font-size="14" fill="#374151">3. Linear interpolation of parameters</text>
  <text x="460" y="255" font-size="13" fill="#64748b">P(age) = P(group) / 5</text>
  <text x="460" y="280" font-size="13" fill="#64748b">V(y) = V1 + (V2-V1) * (y-y1)/(y2-y1)</text>
  
  <rect x="830" y="110" width="320" height="200" rx="12" fill="white" stroke="#e2e8f0" stroke-width="2" filter="url(#shadow)"/>
  <rect x="830" y="110" width="320" height="40" rx="12" fill="url(#greenGrad)"/>
  <text x="990" y="137" text-anchor="middle" font-size="16" font-weight="bold" fill="white">ANNUAL ITERATION</text>
  
  <text x="850" y="175" font-size="14" font-weight="600" fill="#374151">For year = base_year to end_year:</text>
  <text x="860" y="200" font-size="14" fill="#374151">1. Calculate births</text>
  <text x="860" y="225" font-size="14" fill="#374151">2. Calculate deaths by age</text>
  <text x="860" y="250" font-size="14" fill="#374151">3. Age population (age + 1)</text>
  <text x="860" y="275" font-size="14" fill="#374151">4. Record statistics</text>
  
  <path d="M370 210 L430 210" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>
  <path d="M770 210 L830 210" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <rect x="50" y="350" width="360" height="220" rx="12" fill="white" stroke="#e2e8f0" stroke-width="2" filter="url(#shadow)"/>
  <rect x="50" y="350" width="360" height="40" rx="12" fill="url(#greenGrad)"/>
  <text x="230" y="377" text-anchor="middle" font-size="16" font-weight="bold" fill="white">FERTILITY MODEL (Beta Distribution)</text>
  
  <text x="70" y="420" font-size="14" font-weight="600" fill="#374151">Age-Specific Fertility Rate (ASFR):</text>
  <text x="70" y="450" font-size="13" fill="#64748b">f(age) = x^(a-1) * (1-x)^(b-1) / B(a,b)</text>
  <text x="70" y="475" font-size="13" fill="#64748b">where x = (age - 15) / 34</text>
  
  <text x="70" y="510" font-size="14" font-weight="600" fill="#374151">Birth Calculation:</text>
  <text x="70" y="540" font-size="13" fill="#64748b">B = Sum( P(age) * female_ratio * TFR * f(age) )</text>
  <text x="70" y="560" font-size="12" fill="#94a3b8">Fertility age range: 15-49</text>
  
  <rect x="420" y="350" width="360" height="220" rx="12" fill="white" stroke="#e2e8f0" stroke-width="2" filter="url(#shadow)"/>
  <rect x="420" y="350" width="360" height="40" rx="12" fill="url(#redGrad)"/>
  <text x="600" y="377" text-anchor="middle" font-size="16" font-weight="bold" fill="white">MORTALITY MODEL (Gompertz)</text>
  
  <text x="440" y="420" font-size="14" font-weight="600" fill="#374151">Age-Specific Mortality Rate (ASMR):</text>
  <text x="440" y="450" font-size="13" fill="#64748b">u(age) = A * exp(B * age)</text>
  <text x="440" y="475" font-size="13" fill="#64748b">A, B calibrated by life expectancy</text>
  
  <text x="440" y="510" font-size="14" font-weight="600" fill="#374151">Death Calculation:</text>
  <text x="440" y="540" font-size="13" fill="#64748b">D = Sum( P(age) * u(age) )</text>
  <text x="440" y="560" font-size="12" fill="#94a3b8">Infant mortality set separately</text>
  
  <rect x="790" y="350" width="360" height="220" rx="12" fill="white" stroke="#e2e8f0" stroke-width="2" filter="url(#shadow)"/>
  <rect x="790" y="350" width="360" height="40" rx="12" fill="url(#orangeGrad)"/>
  <text x="970" y="377" text-anchor="middle" font-size="16" font-weight="bold" fill="white">POPULATION BALANCE EQUATION</text>
  
  <text x="810" y="420" font-size="14" font-weight="600" fill="#374151">Population Aging Formula:</text>
  <text x="810" y="450" font-size="13" fill="#64748b">P'(0) = B (newborns)</text>
  <text x="810" y="480" font-size="13" fill="#64748b">P'(age+1) = P(age) - D(age)</text>
  <text x="810" y="510" font-size="13" fill="#64748b">P'(100) = 0 (max age)</text>
  
  <text x="810" y="545" font-size="14" font-weight="600" fill="#374151">Natural Growth:</text>
  <text x="810" y="565" font-size="13" fill="#64748b">dP = B - D</text>
  
  <rect x="50" y="610" width="1100" height="130" rx="12" fill="white" stroke="#e2e8f0" stroke-width="2" filter="url(#shadow)"/>
  <rect x="50" y="610" width="1100" height="40" rx="12" fill="url(#blueGrad)"/>
  <text x="600" y="637" text-anchor="middle" font-size="16" font-weight="bold" fill="white">OUTPUT RESULTS</text>
  
  <g transform="translate(80, 680)">
    <rect x="0" y="0" width="150" height="40" rx="8" fill="#eff6ff" stroke="#3b82f6"/>
    <text x="75" y="25" text-anchor="middle" font-size="13" fill="#1d4ed8">Total Population</text>
  </g>
  <g transform="translate(250, 680)">
    <rect x="0" y="0" width="150" height="40" rx="8" fill="#f0fdf4" stroke="#22c55e"/>
    <text x="75" y="25" text-anchor="middle" font-size="13" fill="#16a34a">Births</text>
  </g>
  <g transform="translate(420, 680)">
    <rect x="0" y="0" width="150" height="40" rx="8" fill="#fef2f2" stroke="#ef4444"/>
    <text x="75" y="25" text-anchor="middle" font-size="13" fill="#dc2626">Deaths</text>
  </g>
  <g transform="translate(590, 680)">
    <rect x="0" y="0" width="150" height="40" rx="8" fill="#fff7ed" stroke="#f97316"/>
    <text x="75" y="25" text-anchor="middle" font-size="13" fill="#ea580c">Aging Rate</text>
  </g>
  <g transform="translate(760, 680)">
    <rect x="0" y="0" width="150" height="40" rx="8" fill="#f5f3ff" stroke="#8b5cf6"/>
    <text x="75" y="25" text-anchor="middle" font-size="13" fill="#7c3aed">Dependency Ratio</text>
  </g>
  <g transform="translate(930, 680)">
    <rect x="0" y="0" width="150" height="40" rx="8" fill="#fdf4ff" stroke="#d946ef"/>
    <text x="75" y="25" text-anchor="middle" font-size="13" fill="#c026d3">Age Structure</text>
  </g>
  
  <path d="M230 570 L230 610" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>
  <path d="M600 570 L600 610" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>
  <path d="M970 570 L970 610" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <rect x="50" y="760" width="1100" height="120" rx="12" fill="#f1f5f9"/>
  <text x="80" y="790" font-size="14" font-weight="bold" fill="#374151">Symbol Legend:</text>
  <text x="80" y="815" font-size="12" fill="#64748b">P(age) = population at age | B = births | D = deaths | TFR = total fertility rate | u = mortality rate | f = fertility distribution</text>
  <text x="80" y="840" font-size="12" fill="#64748b">a, b = Beta/Gompertz parameters | female_ratio = 1/(1 + sex_ratio_at_birth)</text>
  <text x="80" y="865" font-size="12" fill="#64748b">Model assumptions: Closed population (no migration), fertility age 15-49, max lifespan 100, annual iteration</text>
</svg>
